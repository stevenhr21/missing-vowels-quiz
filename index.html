<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Missing Vowels Challenge</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Global Header -->
  <div class="global-header">
    <div class="header-left">
      <!-- Global Home (Missing Vowels) Button -->
      <button id="global-home-button" title="Missing Vowels">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
      </button>
    </div>
    <div class="header-right">
      <!-- Menu Button -->
      <button id="menu-button" title="Menu" aria-label="Menu">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/>
        </svg>
      </button>
      <!-- Dropdown Menu -->
      <div id="menu-dropdown" class="hidden" role="menu">
        <button id="menu-missing-vowels" aria-label="Missing Vowels">Missing Vowels</button>
        <button id="menu-connections" aria-label="Connections">Connections</button>
        <button id="menu-sequences" aria-label="Sequences">Sequences</button>
        <button id="menu-connecting-wall" aria-label="Connecting Wall">Connecting Wall</button>
      </div>
    </div>
  </div>
  
  <div class="container">
    <!-- Welcome Page -->
    <div id="welcome-page">
      <div id="welcome-header">
        <h1>MISSING VOWELS</h1>
      </div>
      <select id="category-select">
        <option value="Same but different">Same but different</option>
        <option value="Friends in children's literature">Friends in children's literature</option>
        <option value="Walkers Specials Editions">Walkers Specials Editions</option>
        <option value="Inquisitive film titles">Inquisitive film titles</option>
        <option value="Long form names of countries">Long form names of countries</option>
        <option value="Events and their months">Events and their months</option>
        <option value="Italian Landmarks">Italian Landmarks</option>
        <option value="US Criminals and Outlaws">US Criminals and Outlaws</option>
      </select>
      <div style="text-align: center;">
        <button id="start-button" class="icon-button" title="Start">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z"/>
          </svg>
        </button>
        <button id="leaderboard-button" class="icon-button" title="Leaderboard">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M4 10.5c0 .83-.67 1.5-1.5 1.5S1 11.33 1 10.5 1.67 9 2.5 9 4 9.67 4 10.5zm0-6c0 .83-.67 1.5-1.5 1.5S1 5.33 1 4.5 1.67 3 2.5 3 4 3.67 4 4.5zm0 12c0 .83-.67 1.5-1.5 1.5S1 17.33 1 16.5 1.67 15 2.5 15 4 15.67 4 16.5zM7 4h14v2H7V4zm0 6h14v2H7v-2zm0 6h14v2H7v-2z"/>
          </svg>
        </button>
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <button id="connections-button">Connections</button>
        <button id="sequences-button">Sequences</button>
        <button id="connecting-wall-button">Connecting Wall</button>
      </div>
    </div>
    
    <!-- Quiz Page -->
    <div id="quiz-page" class="hidden">
      <div id="quiz-content">
        <div id="quiz-header">
          <h2 id="quiz-category"></h2>
          <div id="timer">00:00</div>
        </div>
        <div id="progress-container">
          <div id="progress-bar"></div>
        </div>
        <!-- Puzzle Display with Gradient -->
        <div id="puzzle-display"></div>
        <input type="text" id="answer-input" placeholder="Type your answer...">
      </div>
      <div style="text-align: center;">
        <button id="skip-button">Skip</button>
      </div>
      <div id="feedback" style="text-align: center;"></div>
    </div>
    
    <!-- Results Page -->
    <div id="results-page" class="hidden">
      <h2>Quiz Results</h2>
      <p id="results-category"></p>
      <p id="results-score"></p>
      <p id="results-time"></p>
      <div style="text-align: center;">
        <button id="restart-button">Restart</button>
        <button id="results-home-button">Home</button>
        <button id="results-leaderboard-button">Leaderboard</button>
      </div>
    </div>
    
    <!-- Leaderboard Page -->
    <div id="leaderboard-page" class="hidden">
      <h2>Leaderboard</h2>
      <div id="leaderboard-sort">
        <button data-sort="category">Category</button>
        <button data-sort="score">Score</button>
        <button data-sort="time">Time</button>
        <button data-sort="date">Date</button>
      </div>
      <div id="leaderboard-cards"></div>
    </div>
    
    <!-- Connections Page with Hieroglyph Grid -->
    <div id="connections-page" class="subpage hidden">
      <h2>Connections</h2>
      <div class="hieroglyph-grid">
        <div class="hieroglyph-rectangle" data-target="hieroglyph-two-reeds-page">
          <svg class="hieroglyph-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0L15.09 8H24L17.455 12.91L20.545 21L12 16.09L3.455 21L6.545 12.91L0 8H8.91L12 0Z"/>
          </svg>
        </div>
        <div class="hieroglyph-rectangle" data-target="hieroglyph-lion-page">
          <span class="hieroglyph-icon">Lion</span>
        </div>
        <div class="hieroglyph-rectangle" data-target="hieroglyph-twisted-flax-page">
          <span class="hieroglyph-icon">Flax</span>
        </div>
        <div class="hieroglyph-rectangle" data-target="hieroglyph-horned-viper-page">
          <span class="hieroglyph-icon">Viper</span>
        </div>
        <div class="hieroglyph-rectangle" data-target="hieroglyph-water-page">
          <span class="hieroglyph-icon">Water</span>
        </div>
        <div class="hieroglyph-rectangle" data-target="hieroglyph-eye-of-horus-page">
          <span class="hieroglyph-icon">Horus</span>
        </div>
      </div>
      <div class="subpage-nav">
        <button id="missing-vowels-button-from-connections">Missing vowels</button>
        <button id="sequences-button-from-connections">Sequences</button>
        <button id="connecting-wall-button-from-connections">Connecting Wall</button>
      </div>
    </div>
    
    <!-- Sequences Page (Placeholder) -->
    <div id="sequences-page" class="subpage hidden">
      <h2>Sequences</h2>
      <p>Placeholder for Sequences page</p>
      <div class="subpage-nav">
        <button id="missing-vowels-button-from-sequences">Missing vowels</button>
        <button id="connections-button-from-sequences">Connections</button>
        <button id="connecting-wall-button-from-sequences">Connecting Wall</button>
      </div>
    </div>
    
    <!-- Connecting Wall Selection Page -->
    <div id="connecting-wall-page" class="subpage hidden">
      <h2>Connecting Wall</h2>
      <div class="wall-container">
        <div class="wall-rectangle" id="lion-wall-button">Lion Wall</div>
        <div class="wall-rectangle" id="water-wall-button">Water Wall</div>
      </div>
    </div>
    
    <!-- Lion Wall Page (4x4 Grid Puzzle) -->
    <div id="lion-wall-page" class="subpage hidden">
      <h2>Lion Wall</h2>
      <div id="lion-wall-grid" class="wall-grid">
        <!-- Grid cells injected by JS -->
      </div>
      <div>
        <button onclick="showPage(document.getElementById('connecting-wall-page'))">Back to Connecting Wall</button>
      </div>
    </div>
    
    <!-- Water Wall Page (Placeholder) -->
    <div id="water-wall-page" class="subpage hidden">
      <h2>Water Wall</h2>
      <p>Placeholder for Water Wall puzzle</p>
      <div>
        <button onclick="showPage(document.getElementById('connecting-wall-page'))">Back to Connecting Wall</button>
      </div>
    </div>
  
  </div>
  
  <script>
    document.addEventListener("DOMContentLoaded", function() {

      /* --- Utility: Normalize input strings --- */
      function normalize(str) {
        return str.trim().toLowerCase().replace(/\s+/g, " ");
      }
      
      /* --- Quiz Data and Globals --- */
      const quizData = {
        "Same but different": [
          "DOPPELGANGERS",
          "IDENTICAL TWINS",
          "MIRROR IMAGE",
          "ALLOTROPES"
        ],
        "Friends in children's literature": [
          "POOH AND PIGLET",
          "THE FAMOUS FIVE",
          "RAT, MOLE, TOAD AND BADGER",
          "LYRA BELACQUA AND IOREK BYRNISON"
        ],
        "Walkers Specials Editions": [
          "BUILDER'S BREAKFAST",
          "SALT AND LINEKER",
          "STEPHEN FRY UP",
          "JIMMY CON CARRNE"
        ],
        "Inquisitive film titles": [
          "WHAT'S EATING GILBERT GRAPE",
          "DUDE, WHERE'S MY CAR?",
          "O BROTHER, WHERE ART THOU? ",
          "WHAT EVER HAPPENED TO BABY JANE?"
        ],
        "Long form names of countries": [
          "KINGDOM OF DENMARK",
          "COMMONWEALTH OF AUSTRALIA",
          "PLURINATIONAL STATE OF BOLIVIA",
          "FEDERATION OF SAINT CHRISTOPHER AND NEVIS"
        ],
        "Events and their months": [
          "HALLOWEEN AND OCTOBER",
          "EASTER SUNDAY AND MARCH OR APRIL",
          "GROUNDHOG DAY AND FEBRUARY",
          "GROUNDHOG DAY AND FEBRUARY"
        ],
        "Italian Landmarks": [
          "RIALTO BRIDGE",
          "LAKE GARDA",
          "DOGE'S PALACE",
          "PIAZZALE MICHELANGELO",
          "TREVI FOUNTAIN"
        ],
        "US Criminals and Outlaws": [
          "THE SUNDANCE KID",
          "BONNIE PARKER",
          "JESSE JAMES",
          "JOHN DILLINGER",
        ]
      };
      
      let currentCategory = "";
      let questions = [];
      let currentQuestionIndex = 0;
      let score = 0;
      let startTime, timerInterval;
      let skippedQuestions = [];
      
      const sortDirections = { category: 'asc', score: 'asc', time: 'asc', date: 'asc' };
      let currentSortColumn = null;
      
      /* --- Function to Generate Puzzle Text --- */
      function generatePuzzle(answer) {
        const vowels = /[AEIOU\s]/gi;
        const consonants = answer.toUpperCase().replace(vowels, '');
        let groups = [];
        let i = 0;
        while (i < consonants.length) {
          let remaining = consonants.length - i;
          let maxGroup = Math.min(3, remaining);
          let groupSize = Math.floor(Math.random() * maxGroup) + 1;
          groups.push(consonants.substr(i, groupSize));
          i += groupSize;
        }
        return groups.join(' ');
      }
      
      /* --- DOM Elements --- */
      const welcomePage = document.getElementById('welcome-page');
      const quizPage = document.getElementById('quiz-page');
      const resultsPage = document.getElementById('results-page');
      const leaderboardPage = document.getElementById('leaderboard-page');
      const connectionsPage = document.getElementById('connections-page');
      const sequencesPage = document.getElementById('sequences-page');
      const connectingWallPage = document.getElementById('connecting-wall-page');
      const lionWallPage = document.getElementById('lion-wall-page');
      const waterWallPage = document.getElementById('water-wall-page');
      
      const categorySelect = document.getElementById('category-select');
      const startButton = document.getElementById('start-button');
      const leaderboardButton = document.getElementById('leaderboard-button');
      const connectionsButton = document.getElementById('connections-button');
      const sequencesButton = document.getElementById('sequences-button');
      const connectingWallButton = document.getElementById('connecting-wall-button');
      
      const quizCategoryElem = document.getElementById('quiz-category');
      const timerElem = document.getElementById('timer');
      const puzzleDisplay = document.getElementById('puzzle-display');
      const answerInput = document.getElementById('answer-input');
      const skipButton = document.getElementById('skip-button');
      const feedbackElem = document.getElementById('feedback');
      
      const resultsCategoryElem = document.getElementById('results-category');
      const resultsScoreElem = document.getElementById('results-score');
      const resultsTimeElem = document.getElementById('results-time');
      const restartButton = document.getElementById('restart-button');
      const resultsHomeButton = document.getElementById('results-home-button');
      const resultsLeaderboardButton = document.getElementById('results-leaderboard-button');
      
      const leaderboardCards = document.getElementById('leaderboard-cards');
      const globalHomeButton = document.getElementById('global-home-button');
      
      // --- Connecting Wall Selection Button Functionality ---
      const lionWallButton = document.getElementById('lion-wall-button');
      const waterWallButton = document.getElementById('water-wall-button');
      
      lionWallButton.addEventListener('click', () => {
        lionWallButton.classList.add('active');
        setTimeout(() => {
          lionWallButton.classList.remove('active');
          showPage(lionWallPage);
          renderLionWallGrid();
          lionSolvedCount = 0; // Reset solved count for new game
        }, 300);
      });
      
      waterWallButton.addEventListener('click', () => {
        waterWallButton.classList.add('active');
        setTimeout(() => {
          waterWallButton.classList.remove('active');
          showPage(waterWallPage);
          // Placeholder for Water Wall game
        }, 300);
      });
      
      /* --- Hieroglyph Click Functionality --- */
      document.querySelectorAll('#connections-page .hieroglyph-rectangle').forEach(rect => {
        rect.addEventListener('click', () => {
          rect.classList.add('active');
          setTimeout(() => {
            const targetPageId = rect.getAttribute('data-target');
            const targetPage = document.getElementById(targetPageId);
            if (targetPage) {
              showPage(targetPage);
            } else {
              showPage(connectionsPage);
            }
            rect.classList.remove('active');
          }, 300);
        });
      });
      
      /* --- Navigation Functions --- */
      function showPage(page) {
        welcomePage.classList.add('hidden');
        quizPage.classList.add('hidden');
        resultsPage.classList.add('hidden');
        leaderboardPage.classList.add('hidden');
        connectionsPage.classList.add('hidden');
        sequencesPage.classList.add('hidden');
        connectingWallPage.classList.add('hidden');
        lionWallPage.classList.add('hidden');
        waterWallPage.classList.add('hidden');
        document.querySelectorAll('.subpage').forEach(sp => sp.classList.add('hidden'));
        page.classList.remove('hidden');
        document.getElementById('menu-dropdown').classList.add('hidden');
      }
      function goHome() {
        stopTimer();
        showPage(welcomePage);
        answerInput.value = "";
      }
      globalHomeButton.addEventListener('click', goHome);
      resultsHomeButton.addEventListener('click', goHome);
      
      /* --- Menu Dropdown --- */
      const menuButton = document.getElementById('menu-button');
      const menuDropdown = document.getElementById('menu-dropdown');
      menuButton.addEventListener('click', () => { menuDropdown.classList.toggle('hidden'); });
      document.getElementById('menu-missing-vowels').addEventListener('click', () => { showPage(welcomePage); });
      document.getElementById('menu-connections').addEventListener('click', () => { showPage(connectionsPage); });
      document.getElementById('menu-sequences').addEventListener('click', () => { showPage(sequencesPage); });
      document.getElementById('menu-connecting-wall').addEventListener('click', () => { showPage(connectingWallPage); });
      
      /* --- Primary Navigation --- */
      startButton.addEventListener('click', () => {
        currentCategory = categorySelect.value;
        questions = quizData[currentCategory].slice();
        currentQuestionIndex = 0;
        score = 0;
        skippedQuestions = [];
        showPage(quizPage);
        quizCategoryElem.textContent = currentCategory.charAt(0).toUpperCase() + currentCategory.slice(1);
        startTimer();
        displayQuestion();
      });
      leaderboardButton.addEventListener('click', showLeaderboard);
      connectionsButton.addEventListener('click', () => { showPage(connectionsPage); });
      sequencesButton.addEventListener('click', () => { showPage(sequencesPage); });
      connectingWallButton.addEventListener('click', () => { showPage(connectingWallPage); });
      
      /* --- Timer, Quiz, and Other Functions --- */
      function startTimer() {
        startTime = Date.now();
        timerInterval = setInterval(updateTimer, 1000);
      }
      function updateTimer() {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = String(Math.floor(elapsed / 60)).padStart(2, '0');
        const seconds = String(elapsed % 60).padStart(2, '0');
        timerElem.textContent = `${minutes}:${seconds}`;
      }
      function stopTimer() {
        clearInterval(timerInterval);
        return Math.floor((Date.now() - startTime) / 1000);
      }
      function updateProgress() {
        const progressBar = document.getElementById('progress-bar');
        const percentage = (currentQuestionIndex / questions.length) * 100;
        progressBar.style.width = percentage + '%';
      }
      // Use 'keyup' so that as soon as the correct answer is fully typed it advances.
      answerInput.addEventListener('keyup', checkAnswer);
      // Also attach click listener to the skip button
      skipButton.addEventListener('click', skipQuestion);
      
      function displayQuestion() {
        answerInput.value = "";
        feedbackElem.textContent = "";
        updateProgress();
        if (currentQuestionIndex < questions.length) {
          puzzleDisplay.style.opacity = 0;
          setTimeout(() => {
            const answer = questions[currentQuestionIndex];
            puzzleDisplay.textContent = generatePuzzle(answer);
            puzzleDisplay.style.opacity = 1;
            answerInput.focus();
          }, 200);
        } else {
          finishQuiz();
        }
      }
      function checkAnswer() {
        const userAnswer = normalize(answerInput.value);
        const correctAnswer = normalize(questions[currentQuestionIndex]);
        if (userAnswer === correctAnswer && userAnswer.length > 0) {
          feedbackElem.innerHTML = '<span class="correct-indicator">&#10003;</span>';
          setTimeout(() => {
            score++;
            currentQuestionIndex++;
            displayQuestion();
          }, 200);
        }
      }
      function skipQuestion() {
        skippedQuestions.push(questions[currentQuestionIndex]);
        currentQuestionIndex++;
        displayQuestion();
      }
      function finishQuiz() {
        const totalTime = stopTimer();
        resultsCategoryElem.textContent = "Category: " + (currentCategory.charAt(0).toUpperCase() + currentCategory.slice(1));
        resultsScoreElem.textContent = "Correct Answers: " + score + " / " + questions.length;
        const minutes = String(Math.floor(totalTime / 60)).padStart(2, '0');
        const seconds = String(totalTime % 60).padStart(2, '0');
        resultsTimeElem.textContent = "Time Taken: " + minutes + ":" + seconds;
        saveResult({ category: currentCategory, score, time: totalTime, date: new Date().toISOString() });
        showPage(resultsPage);
      }
      function saveResult(result) {
        const leaderboard = JSON.parse(localStorage.getItem('missingVowelsLeaderboard')) || [];
        leaderboard.push(result);
        localStorage.setItem('missingVowelsLeaderboard', JSON.stringify(leaderboard));
      }
      function renderLeaderboard(leaderboard) {
        leaderboardCards.innerHTML = "";
        leaderboard.forEach(entry => {
          const card = document.createElement('div');
          card.classList.add('leaderboard-card');
          const date = new Date(entry.date);
          const minutes = String(Math.floor(entry.time / 60)).padStart(2, '0');
          const seconds = String(entry.time % 60).padStart(2, '0');
          card.innerHTML = `
            <strong>Category:</strong> ${entry.category.charAt(0).toUpperCase() + entry.category.slice(1)}<br>
            <strong>Score:</strong> ${entry.score} / ${quizData[entry.category].length || 'N/A'}<br>
            <strong>Time:</strong> ${minutes}:${seconds}<br>
            <strong>Date:</strong> ${date.toLocaleDateString()}
          `;
          leaderboardCards.appendChild(card);
        });
      }
      function updateSortIndicators() {
        const sortButtons = document.querySelectorAll('#leaderboard-sort button');
        sortButtons.forEach(button => {
          const sortBy = button.getAttribute('data-sort');
          let baseText = button.innerText.split(" ")[0];
          if (sortBy === currentSortColumn) {
            const arrow = sortDirections[sortBy] === 'asc' ? '▲' : '▼';
            button.innerText = baseText + " " + arrow;
          } else {
            button.innerText = baseText;
          }
        });
      }
      function sortLeaderboard(sortBy, sortDir) {
        const leaderboard = JSON.parse(localStorage.getItem('missingVowelsLeaderboard')) || [];
        leaderboard.sort((a, b) => {
          let valA = a[sortBy], valB = b[sortBy];
          if (sortBy === 'date') {
            valA = new Date(valA);
            valB = new Date(valB);
          }
          if (valA < valB) return sortDir === 'asc' ? -1 : 1;
          if (valA > valB) return sortDir === 'asc' ? 1 : -1;
          return 0;
        });
        renderLeaderboard(leaderboard);
        updateSortIndicators();
      }
      function setupLeaderboardSorting() {
        const sortButtons = document.querySelectorAll('#leaderboard-sort button');
        sortButtons.forEach(button => {
          button.addEventListener('click', () => {
            const sortBy = button.getAttribute('data-sort');
            sortDirections[sortBy] = sortDirections[sortBy] === 'asc' ? 'desc' : 'asc';
            currentSortColumn = sortBy;
            sortLeaderboard(sortBy, sortDirections[sortBy]);
          });
        });
      }
      function showLeaderboard() {
        setupLeaderboardSorting();
        const leaderboard = JSON.parse(localStorage.getItem('missingVowelsLeaderboard')) || [];
        renderLeaderboard(leaderboard);
        updateSortIndicators();
        showPage(leaderboardPage);
      }
      
      // Add event listeners for the Results page buttons:
      restartButton.addEventListener('click', () => {
        currentQuestionIndex = 0;
        score = 0;
        skippedQuestions = [];
        showPage(quizPage);
        startTimer();
        displayQuestion();
      });
      resultsLeaderboardButton.addEventListener('click', showLeaderboard);
      
      /* --- Lion Wall Grid Logic --- */
      const lionGroups = {
        "Famous Jacks": ["Grealish", "Dee", "Dorsey", "Whitehall"],
        "Fish": ["Carp", "Halibut", "Cod", "Bass"],
        "___ Out": ["Stand", "Crash", "Cop", "Black"],
        "Parts of a drum kit": ["Hi-hat", "Ride", "Snare", "Tom-Tom"]
      };
      let lionWords = [];
      let lionSelections = [];
      let lionSolvedCount = 0;  // To count solved groups
      
      function renderLionWallGrid() {
        const grid = document.getElementById('lion-wall-grid');
        grid.innerHTML = "";
        lionSelections = []; // Clear previous selections
        // Combine all words (16 total)
        lionWords = [];
        for (let category in lionGroups) {
          lionWords = lionWords.concat(lionGroups[category]);
        }
        // Shuffle the array
        lionWords.sort(() => 0.5 - Math.random());
        lionWords.forEach(word => {
          const cell = document.createElement('div');
          cell.classList.add('wall-cell');
          cell.textContent = word;
          cell.addEventListener('click', () => {
            // Swap colors via toggling "selected" (CSS handles the swap)
            if (cell.classList.contains('selected')) {
              cell.classList.remove('selected');
              lionSelections = lionSelections.filter(w => w !== word);
            } else {
              cell.classList.add('selected');
              lionSelections.push(word);
            }
            if (lionSelections.length === 4) {
              checkLionGroup();
            }
          });
          grid.appendChild(cell);
        });
      }
      
      function checkLionGroup() {
        let matchFound = false;
        for (let category in lionGroups) {
          const groupWords = lionGroups[category];
          const sortedSelected = lionSelections.slice().sort();
          const sortedGroup = groupWords.slice().sort();
          if (JSON.stringify(sortedSelected) === JSON.stringify(sortedGroup)) {
            matchFound = true;
            // Add merge animation to selected cells
            const selectedCells = document.querySelectorAll('.wall-cell.selected');
            selectedCells.forEach(cell => cell.classList.add('merge'));
            setTimeout(() => {
              lionSolvedCount++;
              // Determine header color based on solved order
              const groupColors = ["#fbd534", "#bc70c3", "#739eeb", "#b6e352"];
              const grid = document.getElementById('lion-wall-grid');
              // Remove the selected cells
              selectedCells.forEach(cell => cell.remove());
              // Create a group header cell spanning the grid
              const groupCell = document.createElement('div');
              groupCell.classList.add('group-cell');
              groupCell.style.backgroundColor = groupColors[lionSolvedCount - 1] || "#092f60";
              groupCell.innerHTML = `<strong>${category}</strong><br>${groupWords.join(", ")}`;
              grid.insertBefore(groupCell, grid.firstChild);
              lionSelections = [];
            }, 500);
            break;
          }
        }
        if (!matchFound) {
          // Shake animation for wrong selection
          const selectedCells = document.querySelectorAll('.wall-cell.selected');
          selectedCells.forEach(cell => cell.classList.add('shake'));
          setTimeout(() => {
            selectedCells.forEach(cell => {
              cell.classList.remove('shake');
              cell.classList.remove('selected');
            });
            lionSelections = [];
          }, 500);
        }
      }
      
      /* --- End of DOMContentLoaded --- */
    });
  </script>
</body>
</html>
